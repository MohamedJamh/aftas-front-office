<app-loader *ngIf="isLoading()"></app-loader>
<div *ngIf=" ! isLoading()">
  <div *ngIf="noCompetitionToday() ; else todaysCompetition" class="min-h-screen pt-20">
    <div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-center gap-5">
        <section class="px-2">
          <div class="text-center">
            <h1 class="text-4xl font-extrabold text-gray-900">Oops No Fishing today</h1>
            <p class="mt-3 text-lg text-gray-500">Upcoming Competition in {{getClosestCompetitionDifferenceDays()}}</p>
          </div>
        </section>
        <section class="px-2">
          <img class="h-44 w-44" src="./assets/img/sadfish.png">
        </section>
      </div>
    </div>
  </div>
  <ng-template #todaysCompetition>
    <div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-center gap-5">
        <section class="px-2">
          <div class="text-center">
            <h1 class="text-4xl font-extrabold text-gray-900">Today's Competition</h1>
            <div class="px-6 py-4" [ngSwitch]="competitionService.compareCompetitionToCurrentDateTime(currentDate,upcomingCompetitions[0].date || this.currentDate.toLocaleDateString() , upcomingCompetitions[0].startTime || currentDate.toLocaleTimeString(),upcomingCompetitions[0].endTime || currentDate.toLocaleTimeString())">
                  <span *ngSwitchCase="'Coming soon'" class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-full dark:bg-yellow-700 dark:text-yellow-100">
                      Coming Soon
                  </span>
              <span *ngSwitchCase="'Passed'" class="px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full dark:bg-red-700 dark:text-red-100">
                      Passed
                  </span>
              <span *ngSwitchCase="'Active'" class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-full dark:bg-green-700 dark:text-green-100">
                      Active
                  </span>
            </div>
            <p class="mt-3 text-lg text-gray-500">Code : <small class="font-medium">{{upcomingCompetitions[0].code}}</small></p>
            <p class="mt-3 text-lg text-gray-500">Location : <small  class="font-medium">{{upcomingCompetitions[0].location}}</small></p>
            <p class="mt-3 text-lg text-gray-500">Participants : <small  class="font-medium">{{upcomingCompetitions[0].numberOfParticipants}}</small></p>
            <p class="mt-3 text-lg text-gray-500">Date : <small class="font-medium">{{upcomingCompetitions[0].date | date:'EEEE, MMMM d, y'}}</small></p>
            <p class="mt-3 text-lg text-gray-500">Starts at : <small class="font-medium">{{upcomingCompetitions[0].startTime }}</small></p>
            <p class="mt-3 text-lg text-gray-500">Ends at : <small class="font-medium">{{upcomingCompetitions[0].endTime }}</small></p>
          </div>
        </section>
        <section class="px-2">
          <img class="h-44 w-44" src="./assets/img/happyfish.png">
        </section>
      </div>
    </div>
    <div class="flex justify-between">
      <h2>Real Time Score</h2>
    </div>
    <app-loader *ngIf="competitionRealTimeScore.length == 0; else realTimeScore"></app-loader>
    <ng-template #realTimeScore>
      <table>
        <tbody>
          <tr>
            <th scope="col" class="px-6 py-3">
              Number
            </th>
            <th scope="col" class="px-6 py-3">
              First Name
            </th>
            <th scope="col" class="px-6 py-3">
              Last Name
            </th>
            <th scope="col" class="px-6 py-3">
              Score
            </th>
          </tr>
        </tbody>
          <tr *ngFor="let memberScore of competitionRealTimeScore" class="odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700">
            <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
              {{ memberScore.number}}
            </th>
            <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
              {{ memberScore.firstName}}
            </th>
            <td class="px-6 py-4">
              {{memberScore.lastName}}
            </td>
            <td class="px-6 py-4">
              {{memberScore.score}}
            </td>
          </tr>
      </table>
    </ng-template>
  </ng-template>
</div>

